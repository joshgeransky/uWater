<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>uWater - uFacts</title>
  <script src="../js/index.js" type="text/javascript"></script>
      <link rel="stylesheet" href="../css/foundation.css">

  
    <style>
        
        .country-content {
            
            column-count: 2;
            column-gap: 10px;

            
        }
        
        .country-photos {
            
            padding-left: 20px;
            
        }
        
        .country-photos img {
            
            width: 500px;
            height: auto;
            
        }
        
        .country-water {
            
            margin-left: 150px;
            margin-right: 150px;
            
        }
        
        
    
    </style>
    <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyBEfupg1Yxv54gWoZClRtOIgipjw-JoG5I",
            authDomain: "uwater-a3a85.firebaseapp.com",
            databaseURL: "https://uwater-a3a85.firebaseio.com",
            projectId: "uwater-a3a85",
            storageBucket: "uwater-a3a85.appspot.com",
            messagingSenderId: "89656858094"
          };
          firebase.initializeApp(config);
        </script>
    
</head>
    

<body>
  <link href='https://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>

<!-- [data-animate-header-container] - this is the header container used for calculating when the header is in/out of view -->
<header class='header' data-animate-header-container>

	<!-- [data-animate-header] - this is the actual element that will be fixed/animated -->
	<menu class='header-bar' data-animate-header>
        <a href='../index.html' class='btn-search' data-toggle-class='search-active'>uSearch</a>
		<a href='#uWater' class='btn-menu' data-toggle-class='menu-active'>uWater</a>
        <a href='../uQuiz/uQuiz.html' class='btn-search' data-toggle-class='search-active'>uQuiz</a>

	</menu>
</header>

<article class='article'>
	<header id='article-header-uFacts'>
		<h1 id='article-title'></h1>
		<span id='article-subtitle'></span>
	</header>

	<!-- [data-animate-header-target] - this is where the header will animate -->
	<section class='article-section' data-animate-header-target>
        
        
        <div id="test"></div>
        
        <h1 id="status"></h1>
        <p><b id="cleanest"></b><br><div id="d"></div></p>
	</section>
    
    <section class='country-content'>
    
        <div class='country-photos'>
        <img id="flag" src="" alt='flag'>
        
        </div>
        
        <br>
        <div class='country-water'>
            <div class='find-water'>
                
                <h2>Where To Find Water</h2>
                <span id="where"></span>
            
            </div>
            <br>
            <div class='notable-water'>
            
                <h2>Notable Attractions</h2>
                <span id="attractions"></span>
            
            </div>
        
        </div>
    </section>
    
    <div id="help">
        <span id="didHelp">Did this information help you?</span>
        <button id="button1" onclick="yesFunction()">Yes</button>
        <button id="button2" onclick="yesFunction()">No</button>
    </div>
    
    <br>
    <footer>Â© 2019 Team 21</footer>
</article>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js'></script>

    <script src="../js/index.js"></script>
    
    <script>
        var x = localStorage.getItem("countryInput"); // works
        
        var s = document.getElementById("status");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("water-status");
                    dbRef2.on ('value', function (snap) {
                        s.innerText = snap.val();
                    });
                    var dbRef3 = firebase.database().ref().child("Countries").child(x).child("status-color");
                    dbRef3.on ('value', function (snap) {
                        s.style.color = snap.val();
                    });
                                 
        var w = document.getElementById("where");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("where-water");
                    dbRef2.on ('value', function (snap) {
                        w.innerText = snap.val();
                    });
        var a = document.getElementById("attractions");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("attractions");
                    dbRef2.on ('value', function (snap) {
                        a.innerText = snap.val();
                    });
        var sub = document.getElementById("article-subtitle");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("continent");
                    dbRef2.on ('value', function (snap) {
                        sub.innerText = snap.val();
                    });
        var aTitle = document.getElementById("article-title");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("country-title");
                    dbRef2.on ('value', function (snap) {
                        aTitle.innerText = snap.val();
                    });
        var f = document.getElementById("flag");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("flag-img");
                    dbRef2.on ('value', function (snap) {
                        f.src = snap.val();
                    });
        var c = document.getElementById("cleanest");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("country-subtext");
                    dbRef2.on ('value', function (snap) {
                        c.innerHTML = snap.val();
                    });
        var dyk = document.getElementById("d");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("did-you-know");
                    dbRef2.on ('value', function (snap) {
                        dyk.innerHTML = snap.val();
                    });
        var header = document.getElementById("article-header-uFacts");
                    var dbRef2 = firebase.database().ref().child("Countries").child(x).child("background-img");
                    dbRef2.on ('value', function (snap) {
                        header.style.backgroundImage = `url('${snap.val()}')`;
                    });
    </script>
    <script>
        function yesFunction() {
                    var dbRef3 = firebase.database().ref().child("tallyPath").child("tally");
                    dbRef3.transaction(function(tally) {
                        if (tally){
                            tally = tally + 1;
                        }
                        return tally;
                    });
            var button1 = document.getElementById("button1");
            var button2 = document.getElementById("button2");
            button1.parentNode.removeChild(button1);
            button2.parentNode.removeChild(button2);
            var thanks = document.getElementById("didHelp");
            thanks.innerHTML = "Thank you for your input!";
        }
    </script>

</body>
</html>